var ElevationProfile=function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(i,o,function(e){return t[e]}.bind(null,o));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){t.exports=n(1)},function(t,e,n){"use strict";n.r(e);var i=0,o="5.3.0",r=function(t){function e(e){var n="Assertion failed. See https://openlayers.org/en/"+("latest"===o?o:"v"+o.split("-")[0])+"/doc/errors/#"+e+" for details.";t.call(this,n),this.code=e,this.name="AssertionError",this.message=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error);var s="cosh"in Math?Math.cosh:function(t){var e=Math.exp(t);return(e+1/e)/2};function a(t){return t*Math.PI/180}var l=6371008.8;function c(t,e,n){var i=n||l,o=a(t[1]),r=a(e[1]),s=(r-o)/2,c=a(e[0]-t[0])/2,h=Math.sin(s)*Math.sin(s)+Math.sin(c)*Math.sin(c)*Math.cos(o)*Math.cos(r);return 2*i*Math.atan2(Math.sqrt(h),Math.sqrt(1-h))}var h={DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"},p={};p[h.DEGREES]=2*Math.PI*6370997/360,p[h.FEET]=.3048,p[h.METERS]=1,p[h.USFEET]=1200/3937;var u=h,d=function(t){this.code_=t.code,this.units_=t.units,this.extent_=void 0!==t.extent?t.extent:null,this.worldExtent_=void 0!==t.worldExtent?t.worldExtent:null,this.axisOrientation_=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.global_=void 0!==t.global&&t.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit};d.prototype.canWrapX=function(){return this.canWrapX_},d.prototype.getCode=function(){return this.code_},d.prototype.getExtent=function(){return this.extent_},d.prototype.getUnits=function(){return this.units_},d.prototype.getMetersPerUnit=function(){return this.metersPerUnit_||p[this.units_]},d.prototype.getWorldExtent=function(){return this.worldExtent_},d.prototype.getAxisOrientation=function(){return this.axisOrientation_},d.prototype.isGlobal=function(){return this.global_},d.prototype.setGlobal=function(t){this.global_=t,this.canWrapX_=!(!t||!this.extent_)},d.prototype.getDefaultTileGrid=function(){return this.defaultTileGrid_},d.prototype.setDefaultTileGrid=function(t){this.defaultTileGrid_=t},d.prototype.setExtent=function(t){this.extent_=t,this.canWrapX_=!(!this.global_||!t)},d.prototype.setWorldExtent=function(t){this.worldExtent_=t},d.prototype.setGetPointResolution=function(t){this.getPointResolutionFunc_=t},d.prototype.getPointResolutionFunc=function(){return this.getPointResolutionFunc_};var f=d,y=6378137,m=Math.PI*y,g=[-m,-m,m,m],v=[-180,-85,180,85],_=function(t){function e(e){t.call(this,{code:e,units:u.METERS,extent:g,global:!0,worldExtent:v,getPointResolution:function(t,e){return t/s(e[1]/y)}})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(f),E=[new _("EPSG:3857"),new _("EPSG:102100"),new _("EPSG:102113"),new _("EPSG:900913"),new _("urn:ogc:def:crs:EPSG:6.18:3:3857"),new _("urn:ogc:def:crs:EPSG::3857"),new _("http://www.opengis.net/gml/srs/epsg.xml#3857")];var b=[-180,-90,180,90],x=6378137*Math.PI/180,w=function(t){function e(e,n){t.call(this,{code:e,units:u.DEGREES,extent:b,axisOrientation:n,global:!0,metersPerUnit:x,worldExtent:b})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(f),S=[new w("CRS:84"),new w("EPSG:4326","neu"),new w("urn:ogc:def:crs:EPSG::4326","neu"),new w("urn:ogc:def:crs:EPSG:6.6:4326","neu"),new w("urn:ogc:def:crs:OGC:1.3:CRS84"),new w("urn:ogc:def:crs:OGC:2:84"),new w("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new w("urn:x-ogc:def:crs:EPSG:4326","neu")],M={},T="function"==typeof Object.assign?Object.assign:function(t,e){var n=arguments;if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(t),o=1,r=arguments.length;o<r;++o){var s=n[o];if(null!=s)for(var a in s)s.hasOwnProperty(a)&&(i[a]=s[a])}return i};function O(t){for(var e in t)delete t[e]}var P={};function C(t,e,n){var i=t.getCode(),o=e.getCode();i in P||(P[i]={}),P[i][o]=n}function L(t,e,n){var i;if(void 0!==e){for(var o=0,r=t.length;o<r;++o)e[o]=t[o];i=e}else i=t.slice();return i}function G(t,e,n){if(void 0!==e&&t!==e){for(var i=0,o=t.length;i<o;++i)e[i]=t[i];t=e}return t}function k(t){!function(t,e){M[t]=e}(t.getCode(),t),C(t,t,L)}function j(t){return"string"==typeof t?function(t){return M[t]||null}(t):t||null}function I(t){!function(t){t.forEach(k)}(t),t.forEach((function(e){t.forEach((function(t){e!==t&&C(e,t,L)}))}))}function R(t,e){return function(t,e){var n=function(t,e){var n;return t in P&&e in P[t]&&(n=P[t][e]),n}(t.getCode(),e.getCode());return n||(n=G),n}(j(t),j(e))}function A(t,e,n){return R(e,n)(t,void 0,t.length)}function z(){}I(E),I(S),function(t,e,n,i){t.forEach((function(t){e.forEach((function(e){C(t,e,n),C(e,t,i)}))}))}(S,E,(function(t,e,n){var i=t.length,o=n>1?n:2,r=e;void 0===r&&(r=o>2?t.slice():new Array(i));for(var s=m,a=0;a<i;a+=o){r[a]=s*t[a]/180;var l=y*Math.log(Math.tan(Math.PI*(t[a+1]+90)/360));l>s?l=s:l<-s&&(l=-s),r[a+1]=l}return r}),(function(t,e,n){var i=t.length,o=n>1?n:2,r=e;void 0===r&&(r=o>2?t.slice():new Array(i));for(var s=0;s<i;s+=o)r[s]=180*t[s]/m,r[s+1]=360*Math.atan(Math.exp(t[s+1]/y))/Math.PI-90;return r}));function F(t,e,n,i){for(var o,r=0,s=t.length;r<s;++r)if((o=t[r]).listener===e&&o.bindTo===n)return i&&(o.deleteIndex=r),o}function N(t,e){var n=D(t);return n?n[e]:void 0}function D(t,e){var n=t.ol_lm;return!n&&e&&(n=t.ol_lm={}),n}function q(t,e){var n=N(t,e);if(n){for(var i=0,o=n.length;i<o;++i)t.removeEventListener(e,n[i].boundListener),O(n[i]);n.length=0;var r=D(t);r&&(delete r[e],0===Object.keys(r).length&&function(t){delete t.ol_lm}(t))}}function K(t,e,n,i,o){var r=D(t,!0),s=r[e];s||(s=r[e]=[]);var a=F(s,n,i,!1);return a?o||(a.callOnce=!1):(a={bindTo:i,callOnce:!!o,listener:n,target:t,type:e},t.addEventListener(e,function(t){var e=function(e){var n=t.listener,i=t.bindTo||t.target;return t.callOnce&&W(t),n.call(i,e)};return t.boundListener=e,e}(a)),s.push(a)),a}function X(t,e,n,i){return K(t,e,n,i,!0)}function H(t,e,n,i){var o=N(t,e);if(o){var r=F(o,n,i,!0);r&&W(r)}}function W(t){if(t&&t.target){t.target.removeEventListener(t.type,t.boundListener);var e=N(t.target,t.type);if(e){var n="deleteIndex"in t?t.deleteIndex:e.indexOf(t);-1!==n&&e.splice(n,1),0===e.length&&q(t.target,t.type)}O(t)}}var U=function(){this.disposed_=!1};U.prototype.dispose=function(){this.disposed_||(this.disposed_=!0,this.disposeInternal())},U.prototype.disposeInternal=function(){};var Z=U,B=function(t){this.propagationStopped,this.type=t,this.target=null};B.prototype.preventDefault=function(){this.propagationStopped=!0},B.prototype.stopPropagation=function(){this.propagationStopped=!0};var V=B,Y=function(t){function e(){t.call(this),this.revision_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.changed=function(){++this.revision_,this.dispatchEvent("change")},e.prototype.getRevision=function(){return this.revision_},e.prototype.on=function(t,e){if(Array.isArray(t)){for(var n=t.length,i=new Array(n),o=0;o<n;++o)i[o]=K(this,t[o],e);return i}return K(this,t,e)},e.prototype.once=function(t,e){if(Array.isArray(t)){for(var n=t.length,i=new Array(n),o=0;o<n;++o)i[o]=X(this,t[o],e);return i}return X(this,t,e)},e.prototype.un=function(t,e){if(Array.isArray(t))for(var n=0,i=t.length;n<i;++n)H(this,t[n],e);else H(this,t,e)},e}(function(t){function e(){t.call(this),this.pendingRemovals_={},this.dispatching_={},this.listeners_={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.addEventListener=function(t,e){var n=this.listeners_[t];n||(n=this.listeners_[t]=[]),-1===n.indexOf(e)&&n.push(e)},e.prototype.dispatchEvent=function(t){var e="string"==typeof t?new V(t):t,n=e.type;e.target=this;var i,o=this.listeners_[n];if(o){n in this.dispatching_||(this.dispatching_[n]=0,this.pendingRemovals_[n]=0),++this.dispatching_[n];for(var r=0,s=o.length;r<s;++r)if(!1===o[r].call(this,e)||e.propagationStopped){i=!1;break}if(--this.dispatching_[n],0===this.dispatching_[n]){var a=this.pendingRemovals_[n];for(delete this.pendingRemovals_[n];a--;)this.removeEventListener(n,z);delete this.dispatching_[n]}return i}},e.prototype.disposeInternal=function(){!function(t){var e=D(t);if(e)for(var n in e)q(t,n)}(this)},e.prototype.getListeners=function(t){return this.listeners_[t]},e.prototype.hasListener=function(t){return t?t in this.listeners_:Object.keys(this.listeners_).length>0},e.prototype.removeEventListener=function(t,e){var n=this.listeners_[t];if(n){var i=n.indexOf(e);t in this.pendingRemovals_?(n[i]=z,++this.pendingRemovals_[t]):(n.splice(i,1),0===n.length&&delete this.listeners_[t])}},e}(Z)),J=function(t){function e(e,n,i){t.call(this,e),this.key=n,this.oldValue=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(V),Q={};function $(t){return Q.hasOwnProperty(t)?Q[t]:Q[t]="change:"+t}var tt=function(t){function e(e){t.call(this),function(t){t.ol_uid||(t.ol_uid=String(++i))}(this),this.values_={},void 0!==e&&this.setProperties(e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){var e;return this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e},e.prototype.getKeys=function(){return Object.keys(this.values_)},e.prototype.getProperties=function(){return T({},this.values_)},e.prototype.notify=function(t,e){var n;n=$(t),this.dispatchEvent(new J(n,t,e)),n="propertychange",this.dispatchEvent(new J(n,t,e))},e.prototype.set=function(t,e,n){if(n)this.values_[t]=e;else{var i=this.values_[t];this.values_[t]=e,i!==e&&this.notify(t,i)}},e.prototype.setProperties=function(t,e){for(var n in t)this.set(n,t[n],e)},e.prototype.unset=function(t,e){if(t in this.values_){var n=this.values_[t];delete this.values_[t],e||this.notify(t,n)}},e}(Y);function et(t){return t&&t.parentNode?t.parentNode.removeChild(t):null}var nt=function(t){function e(e){t.call(this),this.element=e.element?e.element:null,this.target_=null,this.map_=null,this.listenerKeys=[],this.render=e.render?e.render:z,e.target&&this.setTarget(e.target)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.disposeInternal=function(){et(this.element),t.prototype.disposeInternal.call(this)},e.prototype.getMap=function(){return this.map_},e.prototype.setMap=function(t){this.map_&&et(this.element);for(var e=0,n=this.listenerKeys.length;e<n;++e)W(this.listenerKeys[e]);this.listenerKeys.length=0,this.map_=t,this.map_&&((this.target_?this.target_:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==z&&this.listenerKeys.push(K(t,"postrender",this.render,this)),t.render())},e.prototype.setTarget=function(t){this.target_="string"==typeof t?document.getElementById(t):t},e}(tt),it=function(t){function e(e){if(t.call(this),this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,K(this,$(this.geometryName_),this.handleGeometryChanged_,this),e)if("function"==typeof e.getSimplifiedGeometry){var n=e;this.setGeometry(n)}else{var i=e;this.setProperties(i)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){var t=new e(this.getProperties());t.setGeometryName(this.getGeometryName());var n=this.getGeometry();n&&t.setGeometry(n.clone());var i=this.getStyle();return i&&t.setStyle(i),t},e.prototype.getGeometry=function(){return this.get(this.geometryName_)},e.prototype.getId=function(){return this.id_},e.prototype.getGeometryName=function(){return this.geometryName_},e.prototype.getStyle=function(){return this.style_},e.prototype.getStyleFunction=function(){return this.styleFunction_},e.prototype.handleGeometryChange_=function(){this.changed()},e.prototype.handleGeometryChanged_=function(){this.geometryChangeKey_&&(W(this.geometryChangeKey_),this.geometryChangeKey_=null);var t=this.getGeometry();t&&(this.geometryChangeKey_=K(t,"change",this.handleGeometryChange_,this)),this.changed()},e.prototype.setGeometry=function(t){this.set(this.geometryName_,t)},e.prototype.setStyle=function(t){this.style_=t,this.styleFunction_=t?function(t){if("function"==typeof t)return t;var e;Array.isArray(t)?e=t:(!function(t,e){if(!t)throw new r(e)}("function"==typeof t.getZIndex,41),e=[t]);return function(){return e}}(t):void 0,this.changed()},e.prototype.setId=function(t){this.id_=t,this.changed()},e.prototype.setGeometryName=function(t){H(this,$(this.geometryName_),this.handleGeometryChanged_,this),this.geometryName_=t,K(this,$(this.geometryName_),this.handleGeometryChanged_,this),this.handleGeometryChanged_()},e}(tt),ot=function(t){var e=t||{};this.info=e.info||ot.prototype.info;var n,i=this;if(e.target)(n=document.createElement("div")).classList.add(e.className||"ol-profil");else{(n=document.createElement("div")).className=((e.className||"ol-profil")+" ol-unselectable ol-control ol-collapsed").trim(),this.button=document.createElement("button"),this.button.setAttribute("type","button");var o=function(t){i.toggle(),t.preventDefault()};this.button.addEventListener("click",o),this.button.addEventListener("touchstart",o),n.appendChild(this.button)}var r=document.createElement("div");r.classList.add("ol-inner"),n.appendChild(r);var s=document.createElement("div");s.style.position="relative",r.appendChild(s);var a=this.ratio=2;this.canvas_=document.createElement("canvas"),this.canvas_.width=(e.width||300)*a,this.canvas_.height=(e.height||150)*a;var l={msTransform:"scale(0.5,0.5)",msTransformOrigin:"0 0",webkitTransform:"scale(0.5,0.5)",webkitTransformOrigin:"0 0",mozTransform:"scale(0.5,0.5)",mozTransformOrigin:"0 0",transform:"scale(0.5,0.5)",transformOrigin:"0 0"};Object.keys(l).forEach((function(t){t in i.canvas_.style&&(i.canvas_.style[t]=l[t])}));var c=document.createElement("div");s.appendChild(c),c.style.width=this.canvas_.width/a+"px",c.style.height=this.canvas_.height/a+"px",c.appendChild(this.canvas_),c.addEventListener("click",(function(t){i.onMove(t)})),c.addEventListener("mousemove",(function(t){i.onMove(t)})),nt.call(this,{element:n,target:e.target}),this.margin_={top:10*a,left:40*a,bottom:30*a,right:10*a},this.info.ytitle||(this.margin_.left-=20*a),this.info.xtitle||(this.margin_.bottom-=20*a),this.bar_=document.createElement("div"),this.bar_.classList.add("ol-profilbar"),this.bar_.style.top=this.margin_.top/a+"px",this.bar_.style.height=(this.canvas_.height-this.margin_.top-this.margin_.bottom)/a+"px",s.appendChild(this.bar_),this.cursor_=document.createElement("div"),this.cursor_.classList.add("ol-profilcursor"),s.appendChild(this.cursor_),this.popup_=document.createElement("div"),this.popup_.classList.add("ol-profilpopup"),this.cursor_.appendChild(this.popup_);var h=document.createElement("table");h.cellPadding="0",h.cellSpacing="0",h.style.clientWidth=this.canvas_.width/a+"px",s.appendChild(h);var p=document.createElement("tr");p.classList.add("track-info"),h.appendChild(p);var u=document.createElement("td");u.innerHTML=(this.info.zmin||"Zmin")+': <span class="zmin">',p.appendChild(u);var d=document.createElement("td");d.innerHTML=(this.info.zmax||"Zmax")+': <span class="zmax">',p.appendChild(d);var f=document.createElement("td");f.innerHTML=(this.info.distance||"Distance")+': <span class="dist">',p.appendChild(f);var y=document.createElement("td");y.innerHTML=(this.info.time||"Time")+': <span class="time">',p.appendChild(y);var m=document.createElement("tr");m.classList.add("point-info"),h.appendChild(m);var g=document.createElement("td");g.innerHTML=(this.info.altitude||"Altitude")+': <span class="z">',m.appendChild(g);var v=document.createElement("td");v.innerHTML=(this.info.distance||"Distance")+': <span class="dist">',m.appendChild(v);var _=document.createElement("td");_.innerHTML=(this.info.time||"Time")+': <span class="time">',m.appendChild(_),this.tab_=[],e.feature&&this.setGeometry(e.feature)};!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t}(ot,nt),ot.prototype.info={zmin:"Zmin",zmax:"Zmax",ytitle:"Altitude (m)",xtitle:"Distance (km)",time:"Time",altitude:"Altitude",distance:"Distance"},ot.prototype.popup=function(t){this.popup_.innerHTML=t},ot.prototype.onMove=function(t){if(this.tab_.length){var e=this.canvas_.getBoundingClientRect(),n=e.top+window.pageYOffset-document.documentElement.clientTop,i=e.left+window.pageXOffset-document.documentElement.clientLeft,o=t.pageX-i,r=t.pageY-n,s=this.ratio;if(o>this.margin_.left/s&&o<(this.canvas_.width-this.margin_.right)/s&&r>this.margin_.top/s&&r<(this.canvas_.height-this.margin_.bottom)/s){this.bar_.style.left=o+"px",this.bar_.style.display="block";for(var a,l=(o*s-this.margin_.left)/this.scale_[0],c=this.tab_[0],h=1;a=this.tab_[h];h++)if(a[0]>=l){l<(a[0]+c[0])/2&&(a=c);break}a?(this.cursor_.style.left=o+"px",this.cursor_.style.top=(this.canvas_.height-this.margin_.bottom+a[1]*this.scale_[1]+this.dy_)/s+"px",this.cursor_.style.display="block"):this.cursor_.style.display="none",this.bar_.parentElement.classList.add("over"),this.element.querySelector(".point-info .z").textContent=a[1]+"m",this.element.querySelector(".point-info .dist").textContent=(a[0]/1e3).toFixed(1)+"km",this.element.querySelector(".point-info .time").textContent=a[2],o>this.canvas_.width/s/2?this.popup_.classList.add("ol-left"):this.popup_.classList.remove("ol-left"),this.dispatchEvent({type:"over",click:"click"==t.type,coord:a[3],time:a[2],distance:a[0]})}else this.bar_.parentElement.classList.contains("over")&&(this.bar_.style.display="none",this.cursor_.style.display="none",this.bar_.parentElement.classList.remove("over"),this.dispatchEvent({type:"out"}))}},ot.prototype.show=function(){this.element.classList.remove("ol-collapsed"),this.dispatchEvent({type:"show",show:!0})},ot.prototype.hide=function(){this.element.classList.add("ol-collapsed"),this.dispatchEvent({type:"show",show:!1})},ot.prototype.toggle=function(){this.element.classList.toggle("ol-collapsed");var t=this.element.classList.contains("ol-collapsed");this.dispatchEvent({type:"show",show:!t})},ot.prototype.isShown=function(){return!this.element.classList.contains("ol-collapsed")},ot.prototype.setGeometry=function(t,e){e||(e={}),t instanceof it&&(t=t.getGeometry());var n=this.canvas_,i=n.getContext("2d"),o=n.width,r=n.height;if(i.setTransform(1,0,0,1,0,0),i.clearRect(0,0,o,r),/Z/.test(t.getLayout())){/M/.test(t.getLayout())?this.element.querySelector(".time").parentElement.style.display="block":this.element.querySelector(".time").parentElement.style.display="none";var s=t.getCoordinates();switch(t.getType()){case"LineString":break;case"MultiLineString":s=s[0];break;default:return}var a=e.projection||this.getMap().getView().getProjection();i.setTransform(1,0,0,1,this.margin_.left,r-this.margin_.bottom);var l=this.ratio;o-=this.margin_.right+this.margin_.left,r-=this.margin_.top+this.margin_.bottom,i.strokeStyle="#000",i.lineWidth=.5*l,i.beginPath(),i.moveTo(0,0),i.lineTo(0,-r),i.moveTo(0,0),i.lineTo(o,0),i.stroke();var h,p,u,d,f,y=1/0,m=-1/0,g=this.tab_=[];for(h=0;p=s[h];h++)(d=p[2])<y&&(y=d),d>m&&(m=d),0==h?u=0:u+=T(s[h-1],p),f=O(s[0][3],p[3]),g.push([u,d,f,p]);this.element.querySelector(".track-info .zmin").textContent=y.toFixed(2)+"m",this.element.querySelector(".track-info .zmax").textContent=m.toFixed(2)+"m",this.element.querySelector(".track-info .dist").textContent=u>1e3?(u/1e3).toFixed(1)+"km":u.toFixed(1)+"m",this.element.querySelector(".track-info .time").textContent=f;for(var v=e.graduation||100;r/(((m=Math.ceil(m/v)*v)-(y=Math.floor(y/v)*v))/v)<15*l;)v*=2;"number"==typeof e.zmin&&y>e.zmin&&(y=e.zmin),"number"==typeof e.zmax&&m<e.zmax&&(m=e.zmax);var _=e.amplitude;_&&(m=Math.max(y+_,m));var E=o/u,b=-r/(m-y),x=this.dy_=-y*b;for(this.scale_=[E,b],i.font=10*l+"px arial",i.textAlign="right",i.textBaseline="middle",i.fillStyle="#000",i.beginPath(),h=y;h<=m;h+=v)"km"!=e.zunit?i.fillText(h,-4*l,h*b+x):i.fillText((h/1e3).toFixed(1),-4*l,h*b+x),i.moveTo(-2*l,h*b+x),0!=h?i.lineTo(u*E,h*b+x):i.lineTo(0,h*b+x);i.textAlign="center",i.textBaseline="top",i.setLineDash([l,3*l]);var w,S=e.unit||"km";for(u>1e3?(w=100*Math.round(u/1e3))>1e3&&(w=1e3*Math.ceil(w/1e3)):(S="m",w=u>100?10*Math.round(u/100):u>10?Math.round(u/10):u>1?Math.round(u)/10:u),h=0;h<=u;h+=w){var M="m"==S?h:h/1e3;i.fillText(Math.round(10*M)/10,h*E,4*l),i.moveTo(h*E,2*l),i.lineTo(h*E,0)}for(i.font=12*l+"px arial",i.fillText(this.info.xtitle.replace("(km)","("+S+")"),o/2,18*l),i.save(),i.rotate(-Math.PI/2),i.fillText(this.info.ytitle,r/2,-this.margin_.left),i.restore(),i.stroke(),i.strokeStyle="#369",i.lineWidth=1,i.setLineDash([]),i.beginPath(),h=0;p=g[h];h++)0==h?i.moveTo(p[0]*E,p[1]*b+x):i.lineTo(p[0]*E,p[1]*b+x);i.stroke()}function T(t,e){return c(A(t,a,"EPSG:4326"),A(e,a,"EPSG:4326"))}function O(t,e){if(!t||!e)return"-";var n=(e-t)/60,i=Math.trunc(n/60),o=Math.trunc(n-60*i);return i+"h"+(o<10?"0":"")+o+"mn"}},ot.prototype.getImage=function(t,e){return"canvas"===t?this.canvas_:this.canvas_.toDataURL(t,e)};var rt=ot,st=Origo.ol.layer.Vector,at=Origo.ol.source.Vector,lt=Origo.ol.style.Style,ct=Origo.ol.style.Circle,ht=Origo.ol.style.Fill,pt=Origo.ol.style.Stroke,ut=Origo.ol.Feature,dt=Origo.ol.geom.Point,ft=function(t){var e,n,i,o,r,s=function(t,i,o){if(i.showProfile&&("LineString"===t.getGeometry().getType()||"MultiLineString"===t.getGeometry().getType())&&("XYZ"===t.getGeometry().getLayout()||"XYZM"===t.getGeometry().getLayout())){var r=document.createElement("li"),s=new rt({target:r,width:240,info:{zmin:"Min höjd",zmax:"Max höjd",ytitle:"Höjd (m)",xtitle:"Distans (km)",time:"Tid",altitude:"Höjd",distance:"Distans"}});return e.addControl(s),s.setGeometry(t.getGeometry()),s.on(["over","out"],(function(t){n&&("over"===t.type?(n.setGeometry(new dt(t.coord)),n.setStyle(null)):n.setStyle([]))})),r}return!1};return Origo.ui.Component({name:"elevationProfile",onAdd:function(){},onInit:function(){e=t.getMap(),r=[new lt({image:new ct({radius:8,fill:new ht({color:[0,153,255]}),stroke:new pt({color:[255,255,255],width:2})}),zIndex:1/0})],n=new ut(new dt([0,0])),i=new at,o=new st({group:"none",source:i,style:r,name:"elevationProfile",visible:!0}),n.setStyle([]),e.addLayer(o),i.addFeature(n),t.getControlByName("featureInfo").addAttributeType("showProfile",s)},onRender:function(){},render:function(){}})};window.Origo&&(Origo.controls.ElevationProfile=ft);var yt=ft;e.default=yt}]).default;